
@{
    ViewBag.Title = "首頁";
}
@section styles{
    <link rel="stylesheet" href="~/Content/HomeCss/cssHomeIndex.css" type="text/css" />
}

<div id="carouselArea">
    <img src="~/Images/User/Index/SlideShowAD/0.jpg" id="imgAd0" />
    <img src="~/Images/User/Index/SlideShowAD/1.jpg" id="imgAd1" hidden />
    <img src="~/Images/User/Index/SlideShowAD/2.jpg" id="imgAd2" hidden />
    <img src="~/Images/User/Index/SlideShowAD/3.jpg" id="imgAd3" hidden />
    <img src="~/Images/User/Index/SlideShowAD/4.jpg" id="imgAd4" hidden />

    <div id="divLeft">
        <a href="" id="arrowLinkLeft">
            <i class="fa-solid fa-circle-chevron-left"></i>
        </a>
    </div>
    <div id="divRight">
        <a href="" id="arrowLinkRight">
            <i class="fa-solid fa-circle-chevron-right"></i>
        </a>
    </div>
    <div id="divCurrent">
        <a href="" id="dotLink0"><i id="dot0" class="fa-solid fa-circle-dot"></i></a>
        <a href="" id="dotLink1"><i id="dot1" class="fa-solid fa-circle"></i></a>
        <a href="" id="dotLink2"><i id="dot2" class="fa-solid fa-circle"></i></a>
        <a href="" id="dotLink3"><i id="dot3" class="fa-solid fa-circle"></i></a>
        <a href="" id="dotLink4"><i id="dot4" class="fa-solid fa-circle"></i></a>
    </div>
</div>
    <div id="mainContent">
        <div id="contentInfo" class="row">
            <div id="newArrival" class="col-6 col-md-3">
                <div id="arrivalText">最新商品</div>
                <div id="arrivalBar"></div>
            </div>
            <div id="checkAll" class="offset-2 col-4 offset-md-7 col-md-2">
                查看全部 →
            </div>
        </div>
    </div>

    <div id="cardList">
    </div>

@section scripts{
    <script>
        var img0 = document.getElementById('imgAd0'); var dot0 = document.getElementById('dot0');
        var img1 = document.getElementById('imgAd1'); var dot1 = document.getElementById('dot1');
        var img2 = document.getElementById('imgAd2'); var dot2 = document.getElementById('dot2');
        var img3 = document.getElementById('imgAd3'); var dot3 = document.getElementById('dot3');
        var img4 = document.getElementById('imgAd4'); var dot4 = document.getElementById('dot4');
        var imgList = [img0, img1, img2, img3, img4];
        var dotList = [dot0, dot1, dot2, dot3, dot4];
        var arrowLeft = document.getElementById('arrowLinkLeft');
        var arrowRight = document.getElementById('arrowLinkRight');
        var arrowList = [arrowLeft, arrowRight];
        var imgNow = 0;
        var carouselAuto = window.setInterval(() => arrowRight.click(), 3000);      // 3秒換一張圖

        document.querySelectorAll('[id^="dotLink"]').forEach(dom => {
            dom.addEventListener('click', event => {
                event.preventDefault();
                imgNow = parseInt(dom.id.slice(-1));
                carouselJump(imgNow);
            });
            dom.addEventListener('mouseover', () => window.clearInterval(carouselAuto));
            dom.addEventListener('mouseout', () => carouselAuto = window.setInterval(() => arrowRight.click(), 3000));
        });

        arrowList.forEach(dom => {
            dom.addEventListener('mouseover', () => window.clearInterval(carouselAuto));
            dom.addEventListener('mouseout', () => carouselAuto = window.setInterval(() => arrowRight.click(), 3000));
        });

        arrowLeft.addEventListener('click', event => {
            event.preventDefault();
            imgNow = imgNow == 0 ? 4 : imgNow - 1;
            carouselJump(imgNow);
        });

        arrowRight.addEventListener('click', event => {
            event.preventDefault();
            imgNow = imgNow == 4 ? 0 : imgNow + 1;
            carouselJump(imgNow);
        });

        function carouselJump(n) {
            imgList.forEach(d => d.hidden = true);
            imgList[n].hidden = false;
            let toDot = dotList[n];
            dotList.forEach(dom => {
                dom.classList.remove('fa-circle-dot');
                dom.classList.add('fa-circle');
            });
            toDot.classList.remove('fa-circle');
            toDot.classList.add('fa-circle-dot');
        }
    </script>
}

